<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/katex/katex.min.css"> <link rel=stylesheet  href="/libs/highlight/styles/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <title>Answering Data Science Interview Question Using Monte Carlo: Batting Average</title> <div class=franklin-content ><p>&#8287; &#8287;</p> <p><strong><a href="/"><span style="color: black"> cd ..</span></a></strong></p> <p><strong><div style="text-align: right"> 2023-07-02 </div></strong></p> <h1 id=title ><a href="#title" class=header-anchor >Answering Data Science Interview Question Using Monte Carlo: Batting Average</a></h1> <p>so I saw this question a while back on twitter:</p> <img src="/assets/mc-batting-prob/phdemetri_interview_q.png"> <div style="text-align: center;"> <a href="https://twitter.com/PhDemetri/status/1673917856055001090" target=_blank  style="color:grey; font-size: 0.85em;"> https://twitter.com/PhDemetri/status/1673917856055001090 </a> </div> <p>it says not to use a simulation, but we&#39;re going to use it because: <div class=img-small > <img src="/assets/mc-batting-prob/fistofthenorthstar.png"> </div> but also:</p> <ul> <li><p>frankly I find it easier to think literally than with abstractions</p> <li><p>in this day and age with the amount of processing power we have, thinking by approximations isn&#39;t obligatory anymore. and in my view the statistical pedagogy hasn&#39;t caught up to that, disservicing learners who think better with simulations</p> <li><p>some replies from working data scientists make me feel a bit vindicated</p> </ul> <img src="/assets/mc-batting-prob/mdneuzerling_reply.png"> <div style="text-align: center;"> <a href="https://twitter.com/mdneuzerling/status/1673927424910974977" target=_blank  style="color:grey; font-size: 0.85em;"> https://twitter.com/mdneuzerling/status/1673927424910974977 </a> </div> <img src="/assets/mc-batting-prob/ajordannafa_reply.png"> <div style="text-align: center;"> <a href="https://twitter.com/ajordannafa/status/1673926343849902080" target=_blank  style="color:grey; font-size: 0.85em;"> https://twitter.com/ajordannafa/status/1673926343849902080 </a> </div> <p>we&#39;ll be using Julia for its speed relative to Python. we&#39;ll also find the closed form solution after using Monte Carlo.</p> <h2 id=monte_carlo_solution ><a href="#monte_carlo_solution" class=header-anchor >Monte Carlo Solution</a></h2> <p>since we&#39;re using a simulation, we can skip the Normal approximation and calculate using the original distribution, which is Binomial.</p> <p>we take lots of data points from two Binomial distributions <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo stretchy=false >(</mo><mn>45</mn><mo separator=true >,</mo><mn>0.275</mn><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">B(45, 0.275)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class=mopen >(</span><span class=mord >45</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.1667em;"></span><span class=mord >0.275</span><span class=mclose >)</span></span></span></span> and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo stretchy=false >(</mo><mn>45</mn><mo separator=true >,</mo><mn>0.3</mn><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">B(45, 0.3)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class=mopen >(</span><span class=mord >45</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.1667em;"></span><span class=mord >0.3</span><span class=mclose >)</span></span></span></span>, subtract the former with the latter to get the difference, then count the probability of getting a positive batting difference.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Distributions <span class=hljs-comment >#stats dist. library</span>

n = <span class=hljs-number >10000</span> <span class=hljs-comment >#how many times we simulate</span>

<span class=hljs-keyword >function</span> batting_prob_diff(n::<span class=hljs-built_in >Int</span>)
    count( i-&gt;(i&gt;<span class=hljs-number >0</span>),
        rand(Binomial(<span class=hljs-number >45</span>,<span class=hljs-number >0.275</span>), n) - rand(Binomial(<span class=hljs-number >45</span>,<span class=hljs-number >0.3</span>), n)
        ) / n
<span class=hljs-keyword >end</span></code></pre> <p>it&#39;s best to display the simulation results cumulatively to see where the probabilites converge.</p> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> Gadfly <span class=hljs-comment >#chart library</span>

plot(x = <span class=hljs-number >1</span>:n, 
     y = map((x) -&gt; batting_prob_diff(x), <span class=hljs-number >1</span>:n),
     Geom.line,
     Guide.xticks(ticks=collect(<span class=hljs-number >0</span>:(n/<span class=hljs-number >8</span>):n)),
     Guide.yticks(ticks=collect(<span class=hljs-number >0</span>:<span class=hljs-number >0.05</span>:<span class=hljs-number >1</span>))
)</code></pre> <img src="/assets/mc-batting-prob/mc_plot.svg"> <p>we can see from the graph that the result approaches <strong>0.35</strong>.</p> <h2 id=closed_form_solution ><a href="#closed_form_solution" class=header-anchor >Closed Form Solution</a></h2> <p>now for the closed form solution. a Binomial distribution <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo stretchy=false >(</mo><mi>n</mi><mo separator=true >,</mo><mi>p</mi><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">B(n,p)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class=mopen >(</span><span class="mord mathnormal">n</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span><span class=mclose >)</span></span></span></span> can be approximated by a Normal distribution <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy=false >(</mo><mi>n</mi><mi>p</mi><mo separator=true >,</mo><mi>n</mi><mi>p</mi><mo stretchy=false >(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy=false >)</mo><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">N(np,np(1-p))</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mopen >(</span><span class="mord mathnormal">n</span><span class="mord mathnormal">p</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">p</span><span class=mopen >(</span><span class=mord >1</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">p</span><span class=mclose >))</span></span></span></span>.</p> <p>so the previous distributions <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo stretchy=false >(</mo><mn>45</mn><mo separator=true >,</mo><mn>0.275</mn><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">B(45, 0.275)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class=mopen >(</span><span class=mord >45</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.1667em;"></span><span class=mord >0.275</span><span class=mclose >)</span></span></span></span> and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo stretchy=false >(</mo><mn>45</mn><mo separator=true >,</mo><mn>0.3</mn><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">B(45, 0.3)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class=mopen >(</span><span class=mord >45</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.1667em;"></span><span class=mord >0.3</span><span class=mclose >)</span></span></span></span> are approximated by <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy=false >(</mo><mn>12.375</mn><mo separator=true >,</mo><mn>8.971875</mn><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">N(12.375, 8.971875)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mopen >(</span><span class=mord >12.375</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.1667em;"></span><span class=mord >8.971875</span><span class=mclose >)</span></span></span></span> and <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo stretchy=false >(</mo><mn>13.5</mn><mo separator=true >,</mo><mn>9.45</mn><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">N(13.5, 9.45)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class=mopen >(</span><span class=mord >13.5</span><span class=mpunct >,</span><span class=mspace  style="margin-right:0.1667em;"></span><span class=mord >9.45</span><span class=mclose >)</span></span></span></span> respectively.</p> <p>now, lucky for us, the distribution of the difference between two Normal distributions is also a Normal distribution. </p> <p>so we&#39;ll get the resulting distribution&#39;s parameters &#40;for Normal it&#39;s mean &amp; variance&#41; and calculate the probability.</p> <p>the new mean is <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>μ</mi><mn>1</mn></msub><mo>−</mo><msub><mi>μ</mi><mn>2</mn></msub><mo>=</mo><mn>12.375</mn><mo>−</mo><mn>13.5</mn><mo>=</mo><mo>−</mo><mn>1.125</mn></mrow><annotation encoding="application/x-tex">\mu_{1}-\mu_{2} = 12.375-13.5 = -1.125</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:0.7778em;vertical-align:-0.1944em;"></span><span class=mord ><span class="mord mathnormal">μ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:0.625em;vertical-align:-0.1944em;"></span><span class=mord ><span class="mord mathnormal">μ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.15em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.7278em;vertical-align:-0.0833em;"></span><span class=mord >12.375</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:0.6444em;"></span><span class=mord >13.5</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.7278em;vertical-align:-0.0833em;"></span><span class=mord >−</span><span class=mord >1.125</span></span></span></span></p> <p>the new variance is <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>σ</mi><mn>1</mn><mn>2</mn></msubsup><mo>+</mo><msubsup><mi>σ</mi><mn>2</mn><mn>2</mn></msubsup><mo>=</mo><mn>8.971875</mn><mo>+</mo><mn>9.45</mn><mo>=</mo><mn>18.421875</mn></mrow><annotation encoding="application/x-tex">\sigma_{1}^{2}+\sigma_{2}^{2} = 8.971875+9.45 = 18.421875</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.0622em;vertical-align:-0.2481em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.8141em;"><span style="top:-2.4519em;margin-left:-0.0359em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.2481em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:1.0622em;vertical-align:-0.2481em;"></span><span class=mord ><span class="mord mathnormal" style="margin-right:0.03588em;">σ</span><span class=msupsub ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.8141em;"><span style="top:-2.4519em;margin-left:-0.0359em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class=pstrut  style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.2481em;"><span></span></span></span></span></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.7278em;vertical-align:-0.0833em;"></span><span class=mord >8.971875</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >+</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:0.6444em;"></span><span class=mord >9.45</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >=</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.6444em;"></span><span class=mord >18.421875</span></span></span></span></p> <p>we can use a cdf function in any programming language to get the solution, or use a cdf table and the z-score if you&#39;re using pen &amp; paper &#40;the z-score is <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>0</mn><mo>−</mo><mo stretchy=false >(</mo><mo>−</mo><mn>1.125</mn><mo stretchy=false >)</mo></mrow><msqrt><mn>18.421875</mn></msqrt></mfrac><mo>≈</mo><mo>−</mo><mn>0.26</mn></mrow><annotation encoding="application/x-tex">\frac{0-(-1.125)}{\sqrt{18.421875}} \approx -0.26</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.548em;vertical-align:-0.538em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.01em;"><span style="top:-2.551em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.9128em;"><span class=svg-align  style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mtight">18.421875</span></span></span><span style="top:-2.8728em;"><span class=pstrut  style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702 c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14 c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54 c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10 s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429 c69,-144,104.5,-217.7,106.5,-221 l0 -0 c5.3,-9.3,12,-14,20,-14 H400000v40H845.2724 s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7 c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80h400000v40h-400000z'/></svg></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.1272em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span><span class="mbin mtight">−</span><span class="mopen mtight">(</span><span class="mord mtight">−</span><span class="mord mtight">1.125</span><span class="mclose mtight">)</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.538em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >≈</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.7278em;vertical-align:-0.0833em;"></span><span class=mord >−</span><span class=mord >0.26</span></span></span></span>&#41;. both approaches will give you a probability of around <strong>0.4</strong>.</p> <h2 id=hang_on_a_sec ><a href="#hang_on_a_sec" class=header-anchor >Hang on a sec...</a></h2> <p>okay, something&#39;s wrong here. our closed form solution gave us <strong>0.4</strong>, the same result Bill James got in the 70s. but our Monte Carlo simulation got us <strong>0.35</strong>. so which one is correct?</p> <p>we can start by presuming confidence in our Monte Carlo simulation, as it was a direct calculation, and cast doubt on our closed form solution which relies on approximating the original distribution into another form. </p> <p>looking around online or in books, it turns out our approximation has a nontrivial issue: we estimated a discrete distribution &#40;Binomial&#41; with a continuous distribution &#40;Normal&#41;, so each discrete value in the former is estimated by various values in a continuous interval from the latter.</p> <p>to correct for this, we can simply subtract 0.5 from our final distribution. so instead of <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy=false >(</mo><mi>X</mi><mo>&gt;</mo><mn>0</mn><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">P(X&gt;0)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >&gt;</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mord >0</span><span class=mclose >)</span></span></span></span>, we&#39;re looking for <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy=false >(</mo><mo stretchy=false >(</mo><mi>X</mi><mo>−</mo><mn>0.5</mn><mo stretchy=false >)</mo><mo>&gt;</mo><mn>0</mn><mo stretchy=false >)</mo><mo>→</mo><mi>P</mi><mo stretchy=false >(</mo><mi>X</mi><mo>&gt;</mo><mn>0.5</mn><mo stretchy=false >)</mo></mrow><annotation encoding="application/x-tex">P((X-0.5)&gt;0) \rightarrow P(X&gt;0.5)</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class=mopen >((</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class=mspace  style="margin-right:0.2222em;"></span><span class=mbin >−</span><span class=mspace  style="margin-right:0.2222em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mord >0.5</span><span class=mclose >)</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >&gt;</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mord >0</span><span class=mclose >)</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >→</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class=mopen >(</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >&gt;</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:1em;vertical-align:-0.25em;"></span><span class=mord >0.5</span><span class=mclose >)</span></span></span></span>. </p> <div class=img-small > <img src="/assets/mc-batting-prob/continuity_correction_table.png"> </div> <div style="text-align: center;"> <snap style="color:grey; font-size: 0.85em;"> example of continuity correction for x = 6 </snap> </div> <p>plugging it into cdf functions or a cdf table &#40;with the changed z-score <span class=katex ><span class=katex-mathml ><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mn>0.5</mn><mo>−</mo><mo stretchy=false >(</mo><mo>−</mo><mn>1.125</mn><mo stretchy=false >)</mo></mrow><msqrt><mn>18.421875</mn></msqrt></mfrac><mo>≈</mo><mo>−</mo><mn>0.37</mn></mrow><annotation encoding="application/x-tex">\frac{0.5-(-1.125)}{\sqrt{18.421875}} \approx -0.37</annotation></semantics></math></span><span class=katex-html  aria-hidden=true ><span class=base ><span class=strut  style="height:1.548em;vertical-align:-0.538em;"></span><span class=mord ><span class="mopen nulldelimiter"></span><span class=mfrac ><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:1.01em;"><span style="top:-2.551em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class=vlist-r ><span class=vlist  style="height:0.9128em;"><span class=svg-align  style="top:-3em;"><span class=pstrut  style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mtight">18.421875</span></span></span><span style="top:-2.8728em;"><span class=pstrut  style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702 c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14 c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54 c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10 s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429 c69,-144,104.5,-217.7,106.5,-221 l0 -0 c5.3,-9.3,12,-14,20,-14 H400000v40H845.2724 s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7 c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80h400000v40h-400000z'/></svg></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.1272em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class=pstrut  style="height:3em;"></span><span class=frac-line  style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class=pstrut  style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0.5</span><span class="mbin mtight">−</span><span class="mopen mtight">(</span><span class="mord mtight">−</span><span class="mord mtight">1.125</span><span class="mclose mtight">)</span></span></span></span></span><span class=vlist-s >​</span></span><span class=vlist-r ><span class=vlist  style="height:0.538em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class=mspace  style="margin-right:0.2778em;"></span><span class=mrel >≈</span><span class=mspace  style="margin-right:0.2778em;"></span></span><span class=base ><span class=strut  style="height:0.7278em;vertical-align:-0.0833em;"></span><span class=mord >−</span><span class=mord >0.37</span></span></span></span>&#41; gives us <strong>0.35</strong>, the same as our Monte Carlo simulation.</p> <div class=page-foot > Last modified: September 19, 2023. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>. </div> </div> <script src="/libs/highlight/highlight.min.js"></script> <script>hljs.highlightAll();hljs.configure({tabReplace: ' '});</script>